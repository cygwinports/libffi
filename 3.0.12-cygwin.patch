--- origsrc/libffi-3.0.12/src/closures.c	2013-02-11 13:24:18.000000000 -0600
+++ src/libffi-3.0.12/src/closures.c	2013-03-12 22:57:56.789678500 -0500
@@ -198,6 +198,7 @@ emutramp_enabled_check (void)
 #include <sys/mman.h>
 
 /* Cygwin is Linux-like, but not quite that Linux-like.  */
+#define is_emutramp_enabled() 0
 #define is_selinux_enabled() 0
 
 #endif /* !defined(X86_WIN32) && !defined(X86_WIN64) */
--- origsrc/libffi-3.0.12/src/x86/ffi.c	2013-02-11 13:24:18.000000000 -0600
+++ src/libffi-3.0.12/src/x86/ffi.c	2013-03-12 23:22:18.267762700 -0500
@@ -28,7 +28,7 @@
    DEALINGS IN THE SOFTWARE.
    ----------------------------------------------------------------------- */
 
-#if !defined(__x86_64__) || defined(_WIN64)
+#if !defined(__x86_64__) || defined(_WIN64) || defined(__CYGWIN__)
 
 #ifdef _WIN64
 #include <windows.h>
